class DBHelper{static get DATABASE_URL(){return"http://localhost:1337/restaurants"}static fetchRestaurants(e){IDBHelper.readAllIdbData(IDBHelper.dbPromise).then(t=>e(null,t))}static fetchRestaurantById(e,t){DBHelper.fetchRestaurants((a,l)=>{if(a)t(a,null);else{const a=l.find(t=>t.id==e);a?t(null,a):t("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(e,t){DBHelper.fetchRestaurants((a,l)=>{if(a)t(a,null);else{const a=l.filter(t=>t.cuisine_type==e);t(null,a)}})}static fetchRestaurantByNeighborhood(e,t){DBHelper.fetchRestaurants((a,l)=>{if(a)t(a,null);else{const a=l.filter(t=>t.neighborhood==e);t(null,a)}})}static fetchRestaurantByCuisineAndNeighborhoodAndFavorite(e,t,a,l){DBHelper.fetchRestaurants((r,n)=>{if(r)l(r,null);else{let r=n;"all"!=e&&(r=r.filter(t=>t.cuisine_type==e)),"all"!=t&&(r=r.filter(e=>e.neighborhood==t)),!0===a&&(r=r.filter(e=>"true"==e.is_favorite)),l(null,r)}})}static fetchNeighborhoods(e){DBHelper.fetchRestaurants((t,a)=>{if(t)e(t,null);else{const t=a.map((e,t)=>a[t].neighborhood),l=t.filter((e,a)=>t.indexOf(e)==a);e(null,l)}})}static fetchCuisines(e){DBHelper.fetchRestaurants((t,a)=>{if(t)e(t,null);else{const t=a.map((e,t)=>a[t].cuisine_type),l=t.filter((e,a)=>t.indexOf(e)==a);e(null,l)}})}static urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}static imageUrlForRestaurant(e){return`http://localhost:8000/img/${e.photograph}.webp`}static mapMarkerForRestaurant(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:DBHelper.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}static toggleFavorite(e,t){fetch(`http://localhost:1337/restaurants/${e}/?is_favorite=${t}`,{method:"POST"}).then(e=>console.log("restaurant favorite has been updated")).then(IDBHelper.idbToggleFavorite(e,t)).then(location.reload())}static saveOfflineReview(e,t){e.preventDefault();const a={restaurant_id:parseInt(t.id.value),name:t.dname.value,rating:parseInt(t.drating.value),comments:t.dreview.value,updatedAt:parseInt(t.ddate.value),flag:t.dflag.value};IDBHelper.idbPostReview(t.id.value,a),location.reload()}}